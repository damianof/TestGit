ON SERVER

cd /usr/share/nginx/html# 
git clone --bare https://github.com/damianof/TestGit.git

cd TestGit.git
cd hooks

vi post-receive

#!/bin/sh


echo "determining branch"
if ! [ -t 0 ]; then
  read -a ref
fi
IFS='/' read -ra REF <<< "${ref[2]}"
branch="${REF[2]}"
if [ "master" == "$branch" ]; then
  echo 'master was pushed - ignoring'
fi

if [ "alpha" == "$branch" ]; then
  echo 'alpha was pushed - deploying'
  git --work-tree=/usr/share/nginx/html/TestGit --git-dir=/usr/share/nginx/html/TestGit.git checkout -f alpha
  npm install --prefix /usr/share/nginx/html/TestGit
  pm2 restart TestGit
fi

(save)

chmod +x post-receive


cd /usr/usr/share/nginx/html/TestGit
pm2 start main.js --name TestGit --node-args="--max-old-space-size=10"


LOCALLY -------
git remote add live ssh://root@162.243.239.188/usr/share/nginx/html/TestGit.git
git add .
git commit -m "My project is ready"
git push live master
